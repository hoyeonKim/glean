.TH GLN 1
.SH NAME
gln \- search interface for glean
.SH SYNOPSIS
.B gln
.RB [ \-h ]
.RB [ \-d " <db_dir>"]
.RB [ \-v ]
.RB [ \-n ]
.RB [ \-N ]
.RB [ \-C " <context_lines>"]
.RB [ \-e " <errors>"]
.RB [ \-s ]
.RB [ \-g ]
.RB [ \-D ]
.RB <QUERY>
.SH DESCRIPTION
gln searches a filesystem using an index previously generated by
gln_index. The index specifies which files to search based on the
query provided, and then a pipeline of one or more
.RB grep
commands is assembled and executed.
.SS Options
.TP
.B \-h
print help summary and exit.
.TP
.B \-d <db_dir>
set location of the .gln index directory (default: ~).
.TP
.B \-v
increase verbosity (can be used multiple times).
.TP
.B \-n
only print matching filenames, not content.
.TP
.B \-N
omit filenames from output.
.TP
.B \-C <context_lines>
set lines of context for NEAR searchers (default: 4).
.TP
.B \-e <errors>
allow up to <errors> errors when searching for matching tokens. Use this
to search for a word, including misspellings.
.I Requires nrgrep.
The -e option's argument is passed verbatim to nrgrep.
.TP
.B \-s
do not implicitly wrap search token regexes in "^(token)$". This
searches for
.B all
tokens that contain the search tokens as substrings.
.TP
.B \-g
do not execute the grep pipeline, just print it and exit.
.TP
.B \-D
dump info about index database and exit. With
.B \-v
option, also dump contents.
.SS Queries
A query consists of one or more tokens and optional keywords. Each token
represents a regular expression to search for, and keywords affect the
interaction of multiple tokens. (Keywords must be in uppercase.)
.TP
.B a AND b
Require both tokens to occur in the same line.
.TP
.B a OR b
Either 'a' or 'b' must occur in the file; show lines containing either.
.TP
.B a NOT b
Do not show results for files containing 'a' if they contain 'b' (on any line).
.TP
.B a NEAR b
Search files that have 'a' within
.B <context_lines>
lines of 'b'. (Not yet implemented.)
.SS Example
.P
.B $ gln foo
.P
Search all indexed files for "foo".
.P
.B $ gln -d. foo bar
.P
.P
Search files for "foo" and "bar" that have an index in the current directory.
.P
.B $ gln -d ~/dev/project/ stopword OR index AND NOT btree
.P
Search all files indexed in
.B ~/dev/project/
for lines containing either "stopword" or "index" that do not contain "btree".
.P
.B $ gln """erl.*"""
.P
Search all files for all tokens matching the regular expression "erl.*" (e.g. "erlang").
.SH EXIT STATUS
.BR gln
returns 0 on success or 1 on error.
.SH SEE ALSO
.BR glean (1),
.BR gln_index (1),
.BR re_format (7).
.SH AUTHOR
Scott Vokes <vokes.s@gmail.com>

